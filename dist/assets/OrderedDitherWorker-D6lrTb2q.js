(function(){"use strict";function g(t){let[n,e,c]=[t.r,t.g,t.b];n/=255,e/=255,c/=255,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,c=c>.04045?Math.pow((c+.055)/1.055,2.4):c/12.92;const r=(n*.4124+e*.3576+c*.1805)/.95047,s=n*.2126+e*.7152+c*.0722,f=(n*.0193+e*.1192+c*.9505)/1.08883,i=d=>d>.008856?Math.cbrt(d):(d*903.3+16)/116,a=i(r),o=i(s),u=i(f),h=116*o-16,l=500*(a-o),M=200*(o-u);return[h,l,M]}function _(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function O(t,n){return[t[0]-n[0],t[1]-n[1],t[2]-n[2]]}function $(t,n,e){return[e*t[0]+(1-e)*n[0],e*t[1]+(1-e)*n[1],e*t[2]+(1-e)*n[2]]}function N(t){return _(t,t)}function C(t,n){return N(O(t,n))}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const j=Symbol("Comlink.proxy"),J=Symbol("Comlink.endpoint"),K=Symbol("Comlink.releaseProxy"),z=Symbol("Comlink.finalizer"),S=Symbol("Comlink.thrown"),G=t=>typeof t=="object"&&t!==null||typeof t=="function",Q={canHandle:t=>G(t)&&t[j],serialize(t){const{port1:n,port2:e}=new MessageChannel;return q(t,n),[e,[e]]},deserialize(t){return t.start(),et(t)}},Z={canHandle:t=>G(t)&&S in t,serialize({value:t}){let n;return t instanceof Error?n={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:n={isError:!1,value:t},[n,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},V=new Map([["proxy",Q],["throw",Z]]);function tt(t,n){for(const e of t)if(n===e||e==="*"||e instanceof RegExp&&e.test(n))return!0;return!1}function q(t,n=globalThis,e=["*"]){n.addEventListener("message",function c(r){if(!r||!r.data)return;if(!tt(e,r.origin)){console.warn(`Invalid origin '${r.origin}' for comlink proxy`);return}const{id:s,type:f,path:i}=Object.assign({path:[]},r.data),a=(r.data.argumentList||[]).map(p);let o;try{const u=i.slice(0,-1).reduce((l,M)=>l[M],t),h=i.reduce((l,M)=>l[M],t);switch(f){case"GET":o=h;break;case"SET":u[i.slice(-1)[0]]=p(r.data.value),o=!0;break;case"APPLY":o=h.apply(u,a);break;case"CONSTRUCT":{const l=new h(...a);o=ct(l)}break;case"ENDPOINT":{const{port1:l,port2:M}=new MessageChannel;q(t,M),o=ot(l,[l])}break;case"RELEASE":o=void 0;break;default:return}}catch(u){o={value:u,[S]:0}}Promise.resolve(o).catch(u=>({value:u,[S]:0})).then(u=>{const[h,l]=A(u);n.postMessage(Object.assign(Object.assign({},h),{id:s}),l),f==="RELEASE"&&(n.removeEventListener("message",c),D(n),z in t&&typeof t[z]=="function"&&t[z]())}).catch(u=>{const[h,l]=A({value:new TypeError("Unserializable return value"),[S]:0});n.postMessage(Object.assign(Object.assign({},h),{id:s}),l)})}),n.start&&n.start()}function nt(t){return t.constructor.name==="MessagePort"}function D(t){nt(t)&&t.close()}function et(t,n){const e=new Map;return t.addEventListener("message",function(r){const{data:s}=r;if(!s||!s.id)return;const f=e.get(s.id);if(f)try{f(s)}finally{e.delete(s.id)}}),H(t,e,[],n)}function T(t){if(t)throw new Error("Proxy has been released and is not useable")}function F(t){return m(t,new Map,{type:"RELEASE"}).then(()=>{D(t)})}const k=new WeakMap,R="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const n=(k.get(t)||0)-1;k.set(t,n),n===0&&F(t)});function rt(t,n){const e=(k.get(n)||0)+1;k.set(n,e),R&&R.register(t,n,t)}function st(t){R&&R.unregister(t)}function H(t,n,e=[],c=function(){}){let r=!1;const s=new Proxy(c,{get(f,i){if(T(r),i===K)return()=>{st(s),F(t),n.clear(),r=!0};if(i==="then"){if(e.length===0)return{then:()=>s};const a=m(t,n,{type:"GET",path:e.map(o=>o.toString())}).then(p);return a.then.bind(a)}return H(t,n,[...e,i])},set(f,i,a){T(r);const[o,u]=A(a);return m(t,n,{type:"SET",path:[...e,i].map(h=>h.toString()),value:o},u).then(p)},apply(f,i,a){T(r);const o=e[e.length-1];if(o===J)return m(t,n,{type:"ENDPOINT"}).then(p);if(o==="bind")return H(t,n,e.slice(0,-1));const[u,h]=W(a);return m(t,n,{type:"APPLY",path:e.map(l=>l.toString()),argumentList:u},h).then(p)},construct(f,i){T(r);const[a,o]=W(i);return m(t,n,{type:"CONSTRUCT",path:e.map(u=>u.toString()),argumentList:a},o).then(p)}});return rt(s,t),s}function at(t){return Array.prototype.concat.apply([],t)}function W(t){const n=t.map(A);return[n.map(e=>e[0]),at(n.map(e=>e[1]))]}const B=new WeakMap;function ot(t,n){return B.set(t,n),t}function ct(t){return Object.assign(t,{[j]:!0})}function A(t){for(const[n,e]of V)if(e.canHandle(t)){const[c,r]=e.serialize(t);return[{type:"HANDLER",name:n,value:c},r]}return[{type:"RAW",value:t},B.get(t)||[]]}function p(t){switch(t.type){case"HANDLER":return V.get(t.name).deserialize(t.value);case"RAW":return t.value}}function m(t,n,e,c){return new Promise(r=>{const s=it();n.set(s,r),t.start&&t.start(),t.postMessage(Object.assign({id:s},e),c)})}function it(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}class ut{FindBestApprox(n,e=[],c=12){const r=g(n),s=e.map((a,o)=>({i:o,d:C(r,g(a))}));s.sort((a,o)=>a.d-o.d);const f=s.slice(0,Math.min(c,s.length)).map(a=>a.i);let i={type:"single",i:f[0],j:-1,alpha:1,dist:s[0].d,dist_i:s[0].d,dist_j:1/0};for(let a=0;a<f.length;a++){const o=f[a];for(let u=a+1;u<f.length;u++){const h=f[u],l=g(e[o]),M=g(e[h]),d=O(l,M),y=N(d);if(y<1e-6)continue;const P=_(O(r,M),d)/y,b=Math.max(0,Math.min(1,P)),E=$(l,M,b),w=C(r,E);w<i.dist&&(i={type:"pair",i:o,j:h,alpha:b,dist:w,dist_i:C(r,l),dist_j:C(r,M)})}}return i}static GetTwoColorDistance(n,e){const[c,r,s]=g(n),[f,i,a]=g(e),o=(c+f)/2,u=Math.sqrt(r*r+s*s),h=Math.sqrt(i*i+a*a),l=(u+h)/2,M=.5*(1-Math.sqrt(Math.pow(l,7)/(Math.pow(l,7)+Math.pow(25,7)))),d=(1+M)*r,y=(1+M)*i,P=Math.sqrt(d*d+s*s),b=Math.sqrt(y*y+a*a),E=(P+b)/2,w=Math.atan2(s,d)*180/Math.PI+(Math.atan2(s,d)<0?360:0),L=Math.atan2(a,y)*180/Math.PI+(Math.atan2(a,y)<0?360:0);let I=L-w;Math.abs(I)>180&&(I-=Math.sign(I)*360);const lt=f-c,U=b-P,v=2*Math.sqrt(P*b)*Math.sin(I*Math.PI/180/2),x=Math.abs(w-L)>180?(w+L+360)/2:(w+L)/2,ft=1-.17*Math.cos((x-30)*Math.PI/180)+.24*Math.cos(2*x*Math.PI/180)+.32*Math.cos((3*x+6)*Math.PI/180)-.2*Math.cos((4*x-63)*Math.PI/180),ht=1+.015*Math.pow(o-50,2)/Math.sqrt(20+Math.pow(o-50,2)),Y=1+.045*E,X=1+.015*E*ft,Mt=-2*Math.sqrt(Math.pow(E,7)/(Math.pow(E,7)+Math.pow(25,7)))*Math.sin(60*Math.exp(-Math.pow((x-275)/25,2))*Math.PI/180);return Math.sqrt(Math.pow(lt/ht,2)+Math.pow(U/Y,2)+Math.pow(v/X,2)+Mt*(U/Y)*(v/X))}static GetTwoColorByRGB(n,e){return(n.r-e.r)*(n.r-e.r)+(n.g-e.g)*(n.g-e.g)+(n.b-e.b)*(n.b-e.b)}static GetTwoColorByLab(n,e){const c=g(n),r=g(e),s=1;return c[0]*=s,r[0]*=s,(c[0]-r[0])*(c[0]-r[0])+(c[1]-r[1])*(c[1]-r[1])+(c[2]-r[2])*(c[2]-r[2])}}q(ut,self)})();
